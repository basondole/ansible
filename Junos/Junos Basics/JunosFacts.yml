---
# this ansible play shows different methods of fact gathering on junos devices
# using an ansible module junos_facts

  - hosts: 192.168.56.36
    gather_facts: no #ignore default fact gathering done by ansible
    connection: local #can also use netconf if netconf is enabled on remote device

    tasks:
       - name: collect default set of facts and ofacts
         junos_facts:
            gather_subset: ofacts
            provider:
              host: 192.168.56.36
              password: fisi123
              username: fisi
         register: info

       - name: display all the facts
         debug: msg={{info}}

       - name: display select facts (hostname | model | version | serialnumber)
         debug: msg={{item}}
         with_items:
            - "{{ansible_facts.hostname}}"
            - "{{ansible_facts.model}}"
            - "{{ansible_facts.version}}"
            - "{{ansible_facts.serialnumber}}"

       - name: collect default set of facts and interface facts
         junos_facts:
            gather_subset:
               interfaces
         register: info

       - name: display all the facts
         debug: msg={{info}}

       - name: display specific interface facts (loopback)
         debug: msg={{ansible_facts.net_interfaces.lo0}}

       - name: collect default set of facts and configuration
         junos_facts:
            config_format: text #defines the format in which the device config will be rendered
            gather_subset:
               config
         register: info

       - name: display the facts
         debug: msg={{info}}
